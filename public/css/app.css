/* Highlight for duplicate file (409) */
.dupe-highlight {
  animation: dupeHighlight 1.2s cubic-bezier(0.4, 1.6, 0.4, 1) 1;
  background: linear-gradient(90deg, #ffb347 0%, #ffcc80 100%) !important;
  box-shadow: 0 0 0 2px #ff9800, 0 2px 12px #ff980055;
}
@keyframes dupeHighlight {
  0% {
    background: #fffbe6;
    box-shadow: 0 0 0 0 #ff9800;
  }
  30% {
    background: #ffb347;
    box-shadow: 0 0 0 4px #ff9800;
  }
  70% {
    background: #ffcc80;
    box-shadow: 0 0 0 2px #ff9800;
  }
  100% {
    background: inherit;
    box-shadow: none;
  }
}

/* Animate removal for duplicate file (409) */
.dupe-remove {
  animation: dupeRemove 0.4s cubic-bezier(0.4, 1.6, 0.4, 1) forwards;
  opacity: 1;
}
@keyframes dupeRemove {
  0% {
    opacity: 1;
    transform: scale(1) translateX(0);
  }
  60% {
    opacity: 0.5;
    transform: scale(0.98) translateX(8px);
  }
  100% {
    opacity: 0;
    transform: scale(0.95) translateX(40px);
    height: 0;
    margin: 0;
    padding: 0;
  }
}
/* basic placeholder css */
:root {
  --accent: #ff9800;
  --accent-rgb: 255 152 0;
  --bg: #0f141b;
  --panel: #1d2733;
  --panel-border: #2f3b4a;
  --fg: #e8edf2;
  --text: #f2f6fb;
  --text-subtle: #b5c0cc;
  --text-muted: #9aa7b5;
  --danger: #e53935;
  --ok: #4caf50;
  --radius: 14px;
  --e-out: cubic-bezier(0.16, 0.8, 0.3, 1);
  --e-in: cubic-bezier(0.5, 0.05, 0.2, 0.99);
  font-family: system-ui, sans-serif;
}

body {
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  font: 14px/1.4 system-ui, sans-serif;
}

a {
  color: var(--accent);
}

:root {
  --bg: #0d1218;
  --panel: #1d2733;
  --panel-border: #2f3b4a;
  --accent: #ff9800;
  --accent-rgb: 255 152 0;
  --text: #f2f6fb;
  --text-subtle: #b5c0cc;
  --text-muted: #9aa7b5;
  --danger: #e53935;
  --ok: #4caf50;
  --radius: 14px;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
    Noto Sans, sans-serif;
  --e-out: cubic-bezier(0.16, 0.8, 0.3, 1);
  --e-in: cubic-bezier(0.5, 0.05, 0.2, 0.99);
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
}

header {
  padding: 1.9rem 1.2rem 1rem;
  text-align: center;
}

h1 {
  margin: 0 0 0.45rem;
  font-size: clamp(2rem, 4.2vw, 3.25rem);
  color: var(--text);
  letter-spacing: 0.5px;
  font-weight: 600;
}

p.lead {
  margin: 0;
  color: var(--text-subtle);
  font-size: 0.95rem;
}

main {
  width: min(880px, 82%);
  margin: 1.1rem auto 2.5rem;
  display: grid;
  gap: 1.6rem;
  grid-template-columns: 1fr;
}

.panel {
  position: relative;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: 0 4px 16px -8px rgba(0, 0, 0, 0.6);
}

.panel section {
  padding: 1.25rem 1.35rem 1.5rem;
}

.panel h2 {
  margin: 0 0 1rem;
  font-size: 1.05rem;
  font-weight: 600;
  letter-spacing: 0.7px;
  text-transform: uppercase;
  color: var(--text-subtle);
}

/* === Drop-zone (deduplicated) === */
/* Updated: Orange contrasted drop-zone theme */
.drop-zone {
  position: relative;
  border: 2px dashed #ff9800;
  border-radius: calc(var(--radius) - 4px);
  padding: 3.5rem 1rem;
  text-align: center;
  cursor: pointer;
  min-height: 240px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.65rem;
  transition: 0.25s border-color, 0.25s background, 0.25s transform,
    0.25s box-shadow;
  width: 100%;
  overflow: hidden;
  background: linear-gradient(145deg, #462605, #2d1803 58%, #271503);
  color: var(--text);
  box-shadow: 0 4px 14px -6px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 152, 0, 0.15);
}

.drop-zone::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
        circle,
        transparent 22%,
        #3a2106 22%,
        #3a2106 78%,
        transparent 78%,
        transparent
      )
      0% 0% / 64px 64px,
    radial-gradient(
        circle,
        transparent 22%,
        #3a2106 22%,
        #3a2106 78%,
        transparent 78%,
        transparent
      )
      32px 32px / 64px 64px,
    linear-gradient(#ff9800 2px, transparent 2px) 0 -1px / 32px 32px,
    linear-gradient(90deg, #ff9800 2px, #3a2106 2px) -1px 0 / 32px 32px #3a2106;
  background-size: 64px 64px, 64px 64px, 32px 32px, 32px 32px;
  opacity: 0.18;
}

.drop-zone:hover {
  background: linear-gradient(145deg, #4d2a07, #311b05 58%, #2a1704);
}

.drop-zone input {
  display: none;
}

.drop-zone .icon {
  font-size: 3.2rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.55));
  margin-bottom: 0.35rem;
}

.drop-zone.drag {
  border-color: #ffc369;
  background: linear-gradient(145deg, #5a310a, #382107 55%, #311d07);
  box-shadow: 0 6px 18px -8px rgba(0, 0, 0, 0.7),
    0 0 0 2px rgba(255, 152, 0, 0.35);
  transform: scale(1.015);
}

.drop-zone .ripple {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(
    circle at center,
    rgba(var(--accent-rgb) / 0.55),
    rgba(var(--accent-rgb) / 0) 70%
  );
  transform: scale(0);
  animation: dzRipple 0.85s var(--e-out) forwards;
  pointer-events: none;
  opacity: 0.9;
  mix-blend-mode: overlay;
}

/* Adjusted pattern colors for orange theme */

.drop-zone::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    rgba(20, 12, 5, 0) 58%,
    rgba(20, 12, 5, 0.78) 100%
  );
  pointer-events: none;
}

.drop-zone.animate::before {
  animation: dzDiag 24s linear infinite;
}

.drop-zone.drag::before {
  animation: dzDiagFast 2.2s linear infinite;
  opacity: 0.28;
}

/* Focus ring ensure sufficient contrast on orange surface */
.drop-zone:focus-visible {
  box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.55),
    0 0 0 5px rgba(var(--accent-rgb) / 0.55);
}

@keyframes dzRipple {
  to {
    transform: scale(1);
    opacity: 0;
  }
}

@keyframes dzDiag {
  from {
    background-position: 0 0, 32px 32px, 0 -1px, -1px 0;
  }

  to {
    background-position: 64px 64px, 96px 96px, 64px 63px, 63px 64px;
  }
}

@keyframes dzDiagFast {
  from {
    background-position: 0 0, 32px 32px, 0 -1px, -1px 0;
  }

  to {
    background-position: 64px 64px, 96px 96px, 64px 63px, 63px 64px;
  }
}

.muted {
  color: var(--text-muted);
  font-size: 0.75rem;
  letter-spacing: 0.4px;
}

ul#fileList {
  list-style: none;
  margin: 0.9rem 0 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.65rem;
  max-height: 320px;
  overflow: auto;
  scrollbar-width: thin;
}

ul#fileList li {
  background: #232e3a;
  border: 1px solid #314051;
  padding: 0.7rem 0.8rem 0.6rem;
  border-radius: 11px;
  font-size: 0.78rem;
  display: flex;
  flex-direction: column;
  gap: 0.65rem;
  position: relative;
  will-change: transform, opacity;
  transition: background 0.35s, border-color 0.35s, transform 0.45s var(--e-out),
    box-shadow 0.45s;
}

ul#fileList li.adding {
  opacity: 0;
  transform: translateY(4px) scale(0.97);
}

ul#fileList li.adding.in {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: 0.55s var(--e-out);
}

ul#fileList li:not(.removing):hover {
  transform: translateY(-2px);
}

ul#fileList li:hover {
  box-shadow: 0 4px 22px -10px rgba(0, 0, 0, 0.7);
}

ul#fileList li.removing {
  animation: squishOutSoft 0.48s var(--e-out) forwards;
  transform-origin: top center;
}

@keyframes squishOut {
  0% {
    opacity: 1;
    transform: scale(1);
    height: var(--orig-h);
    margin-top: var(--orig-mt);
    margin-bottom: var(--orig-mb);
  }

  60% {
    opacity: 0.35;
    transform: scale(0.96, 0.65);
  }

  100% {
    opacity: 0;
    transform: scale(0.95, 0.2);
    height: 0;
    margin-top: 0;
    margin-bottom: 0;
    padding-top: 0;
    padding-bottom: 0;
  }
}

@keyframes squishOutSoft {
  0% {
    opacity: 1;
    transform: scale(1);
    height: var(--orig-h);
    margin-top: var(--orig-mt);
    margin-bottom: var(--orig-mb);
  }

  60% {
    opacity: 0.55;
    transform: scale(0.97);
  }

  100% {
    opacity: 0;
    transform: scale(0.92);
    height: 0;
    margin-top: 0;
    margin-bottom: 0;
    padding-top: 0;
    padding-bottom: 0;
  }
}

.file-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto auto;
  align-items: center;
  gap: 0.6rem;
}

.file-row .actions {
  display: flex;
  align-items: center;
  justify-content: center;
}

.file-row .name {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
}

.file-row .size {
  font-variant-numeric: tabular-nums;
  color: var(--text-muted);
  font-size: 0.75rem;
}

.file-row .actions {
  display: flex;
  gap: 0.35rem;
}

.file-row button.remove {
  background: #2f3b49;
  border: 1px solid #3b4a5a;
  color: #d3dde6;
  font-size: 0.75rem;
  padding: 0.25rem 0.4rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s, border-color 0.3s, color 0.3s,
    transform 0.45s var(--e-out);
}

.file-row button.remove:hover {
  background: #354554;
  transform: translateY(-2px);
}

.file-row button.remove:active {
  transform: translateY(0) scale(0.94);
}

.bar {
  height: 5px;
  background: #141e28;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 4px;
  box-shadow: inset 0 0 0 1px #1d2732;
  transition: height 0.45s ease, background-color 0.45s ease,
    margin-top 0.45s ease;
}

.bar span {
  display: block;
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.45s linear, opacity 0.25s ease;
  position: relative;
}

.status-note {
  margin-top: 0.45rem;
  color: var(--text-subtle);
  font-size: 0.72rem;
  letter-spacing: 0.33px;
  display: inline-flex;
  align-items: center;
  gap: 0.55rem;
  opacity: 0.95;
  background: rgba(24, 32, 42, 0.92);
  border: 1px solid rgba(76, 100, 128, 0.35);
  border-radius: 999px;
  padding: 0.38rem 0.75rem 0.38rem 0.5rem;
  transition: opacity 0.35s ease, transform 0.35s var(--e-out),
    background 0.35s ease, border-color 0.35s ease;
}

.status-note .status-icon {
  width: 0.9rem;
  height: 0.9rem;
  border-radius: 999px;
  border: 1px solid rgba(var(--accent-rgb) / 0.35);
  background: rgba(var(--accent-rgb) / 0.16);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
  position: relative;
  box-shadow: 0 0 6px rgba(var(--accent-rgb) / 0.25);
  transition: border-color 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
}

.status-note .status-icon::after {
  content: "";
  width: 55%;
  height: 55%;
  border-radius: inherit;
  background: rgba(var(--accent-rgb) / 0.85);
  display: block;
}

.status-note .status-text {
  line-height: 1.35;
}

.status-note[data-state="queue"] .status-icon {
  background: rgba(var(--accent-rgb) / 0.22);
}

.status-note[data-state="hashing"] .status-icon {
  background: rgba(var(--accent-rgb) / 0.24);
}

.status-note[data-state="preparing"] .status-icon {
  background: rgba(var(--accent-rgb) / 0.28);
}

.status-note[data-state="uploading"] .status-icon {
  border: 2px solid rgba(var(--accent-rgb) / 0.25);
  border-top-color: rgba(var(--accent-rgb) / 0.95);
  background: transparent;
  animation: statusSpinner 0.8s linear infinite;
}

.status-note[data-state="uploading"] .status-icon::after {
  content: none;
}

.status-note[data-state="finalizing"] .status-icon {
  background: rgba(var(--accent-rgb) / 0.85);
  border: 1px solid rgba(var(--accent-rgb) / 0.45);
}

.status-note[data-state="finalizing"] .status-icon::after {
  background: rgba(15, 20, 27, 0.9);
  width: 45%;
  height: 45%;
}

.bar span:not(.complete)::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    rgba(var(--accent-rgb) / 0) 0%,
    rgba(var(--accent-rgb) / 0.45) 50%,
    rgba(var(--accent-rgb) / 0) 100%
  );
  animation: barSheen 1.4s linear infinite;
  mix-blend-mode: overlay;
}

@keyframes barSheen {
  from {
    transform: translateX(-100%);
  }

  to {
    transform: translateX(100%);
  }
}

@keyframes statusPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 6px rgba(var(--accent-rgb) / 0.25);
  }

  50% {
    transform: scale(1.15);
    box-shadow: 0 0 10px rgba(var(--accent-rgb) / 0.35);
  }

  100% {
    transform: scale(1);
    box-shadow: 0 0 6px rgba(var(--accent-rgb) / 0.25);
  }
}

@keyframes statusSpinner {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

.bar span.complete {
  background: var(--accent);
}

.bar.divider {
  height: 2px;
  background: #2c394a;
  box-shadow: none;
  margin-top: 6px;
  position: relative;
}

.bar.divider span {
  opacity: 0;
  background: #2c394a !important;
  width: 100% !important;
  transition: opacity 0.4s ease;
}

button.icon-trash {
  background: #462a2c;
  border: 1px solid #543334;
  color: #ffd3d2;
  width: 26px;
  height: 26px;
  padding: 0;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.18s background, 0.18s border-color, 0.18s color,
    0.45s var(--e-out);
}

button.icon-trash:hover {
  background: #5b3335;
  border-color: #683a3d;
  color: #ffe0df;
  transform: translateY(-2px);
}

button.icon-trash:active {
  background: #4b2b2d;
  transform: translateY(0) scale(0.94);
}

button.icon-trash:disabled {
  opacity: 0.55;
  cursor: default;
}

button.icon-trash svg {
  width: 14px;
  height: 14px;
  pointer-events: none;
}

.links {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  margin-top: 0.3rem;
}

.links .link-input {
  opacity: 0;
  transform: translateY(4px);
  animation: fadeSlideIn 0.5s var(--e-out) forwards;
}

@keyframes fadeSlideIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.link-input {
  width: 100%;
  background: #121b24;
  border: 1px solid #2b394a;
  color: var(--text);
  font-size: 0.75rem;
  padding: 0.4rem 0.5rem;
  border-radius: 6px;
  font-family: monospace;
  letter-spacing: 0.4px;
  cursor: pointer;
}

.link-input.pending {
  border-style: dashed;
  border-color: rgba(var(--accent-rgb) / 0.55);
  background: #151f29;
  color: var(--text-subtle);
  cursor: wait;
}

.link-input.ready-flash {
  animation: linkReady 0.65s var(--e-out);
}

@keyframes linkReady {
  0% {
    box-shadow: 0 0 0 0 rgba(var(--accent-rgb) / 0.45);
  }
  60% {
    box-shadow: 0 0 0 8px rgba(var(--accent-rgb) / 0);
  }
  100% {
    box-shadow: none;
  }
}

.link-input:focus {
  outline: 1px solid var(--accent);
  border-color: var(--accent);
}

footer {
  margin: auto 0 0;
  padding: 1.25rem;
  text-align: center;
  font-size: 0.78rem;
  color: var(--text-subtle);
  letter-spacing: 0.7px;
}

.site-note {
  margin-top: 1rem;
  font-size: 0.78rem;
  color: var(--text-muted);
  letter-spacing: 0.5px;
  line-height: 1.5;
}

.site-note a {
  color: #cfd6de;
  text-decoration: underline;
}

.site-note a:hover {
  color: var(--accent);
}

#snackbar {
  position: fixed;
  bottom: 26px;
  left: 50%;
  transform: translateX(-50%) translateY(20px);
  background: #222e3d;
  color: var(--text);
  padding: 0.65rem 1rem;
  font-size: 0.7rem;
  border: 1px solid #2d3948;
  border-radius: 8px;
  opacity: 0;
  pointer-events: none;
  transition: 0.35s;
  letter-spacing: 0.5px;
  box-shadow: 0 6px 18px -8px rgba(0, 0, 0, 0.55);
}

#snackbar.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* New: error snackbar variant (pill, red) */
#snackbar.error {
  background: var(--danger);
  border-color: #b32724;
  color: #fff;
  border-radius: 999px;
  box-shadow: 0 8px 22px -10px rgba(229, 57, 53, 0.55);
}

/* Shake animation for drop-zone on denied file */
@keyframes dzShake {
  0%,
  100% {
    transform: translateX(0);
  }

  15%,
  45%,
  75% {
    transform: translateX(-7px);
  }

  30%,
  60%,
  90% {
    transform: translateX(7px);
  }
}

.drop-zone.shake {
  animation: dzShake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97);
}

#ownedList {
  list-style: none;
  margin: 0;
  padding: 0;
}

#ownedList .owned-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 0.75rem;
  opacity: 0;
  transform: translateY(12px) scale(0.98);
  transition: opacity 0.4s var(--e-out), transform 0.45s var(--e-out);
}

#ownedList .owned-grid.morph-ready {
  opacity: 1;
  transform: translateY(0) scale(1);
}

#ownedList .owned-grid.skip-transition {
  transition: none;
  opacity: 1;
  transform: none;
}

#ownedList [data-skeleton="true"],
#ownedList [data-empty="true"] {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 0.75rem;
}

#ownedList [data-empty="true"] {
  grid-template-columns: 1fr;
}

#ownedList [data-empty="true"] .owned-empty {
  min-height: 132px;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
}

#ownedList [data-empty="true"] .owned-empty span {
  font-size: 0.85rem;
  opacity: 0.75;
}

.owned-skeleton,
.owned-empty {
  background: #232e3a;
  border: 1px solid #314051;
  padding: 0.6rem 0.65rem 0.55rem;
  border-radius: 10px;
  min-height: 96px;
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.owned-empty {
  align-items: center;
  justify-content: center;
  text-align: center;
  font-size: 0.85rem;
  color: var(--text-muted);
}

.owned-empty span {
  display: block;
  font-size: 0.75rem;
  opacity: 0.7;
  margin-top: 0.35rem;
}

.skeleton-line,
.skeleton-bar {
  position: relative;
  width: 100%;
  border-radius: 6px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.05) 0%,
    rgba(255, 255, 255, 0.16) 50%,
    rgba(255, 255, 255, 0.05) 100%
  );
  background-size: 240px 100%;
  animation: skeletonShimmer 1.4s infinite;
}

.skeleton-line {
  height: 12px;
}

.skeleton-line.compact {
  width: 60%;
}

.skeleton-bar {
  height: 6px;
  width: 80%;
}

.owned-skeleton > :last-child {
  margin-top: auto;
}

#ownedPanel.owned-refreshing {
  animation: ownedPanelPulse 0.6s var(--e-out);
}

#ownedPanel.owned-loading {
  position: relative;
}

#ownedPanel.owned-loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(15, 20, 27, 0.7) 0%,
    rgba(29, 39, 51, 0.65) 50%,
    rgba(15, 20, 27, 0.7) 100%
  );
  pointer-events: none;
  border-radius: inherit;
  opacity: 0.6;
}

@keyframes skeletonShimmer {
  0% {
    background-position: -240px 0;
  }
  100% {
    background-position: 240px 0;
  }
}

@keyframes ownedPanelPulse {
  0% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-6px);
  }
  100% {
    transform: translateY(0);
  }
}

.owned-chip {
  background: #232e3a;
  border: 1px solid #314051;
  padding: 0.6rem 0.65rem 0.55rem;
  border-radius: 10px;
  font-size: 0.78rem;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
  position: relative;
  will-change: transform, opacity;
  transition: background 0.35s, border-color 0.35s, transform 0.45s var(--e-out),
    box-shadow 0.45s;
}

.owned-chip.adding {
  opacity: 0;
  transform: translateY(4px) scale(0.97);
}

.owned-chip.adding.in {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: 0.55s var(--e-out);
}

.owned-chip:not(.removing):hover {
  transform: translateY(-2px);
}

.owned-chip:hover {
  box-shadow: 0 4px 22px -10px rgba(0, 0, 0, 0.7);
}

.owned-chip.removing {
  animation: squishOutSoft 0.48s var(--e-out) forwards;
  transform-origin: top center;
}

.owned-chip .top {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.owned-chip .name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
}

.owned-chip .actions {
  display: flex;
  gap: 0.3rem;
}

.owned-chip button.small {
  background: #2f3b49;
  border: 1px solid #3b4a5a;
  color: #d3dde6;
  font-size: 0.75rem;
  padding: 0.28rem 0.5rem;
  border-radius: 5px;
  cursor: pointer;
  letter-spacing: 0.4px;
  transition: background 0.3s, border-color 0.3s, color 0.3s,
    transform 0.45s var(--e-out);
}

.owned-chip button.small:hover {
  background: #354554;
  transform: translateY(-2px);
}

.owned-chip button.small:active {
  transform: translateY(0) scale(0.94);
}

.owned-chip button.small:disabled {
  opacity: 0.55;
  cursor: default;
}

.owned-chip .link-input.mini {
  font-size: 0.75rem;
  padding: 0.3rem 0.45rem;
}

.owned-chip.expiring .ttl {
  color: var(--danger);
}

#ownedPanel {
  transition: opacity 0.5s var(--e-out), transform 0.5s var(--e-out);
}

#ownedPanel.reveal-start {
  opacity: 0;
  transform: translateY(8px);
}

#ownedPanel.reveal {
  opacity: 1;
  transform: translateY(0);
}

@keyframes ownedPanelOut {
  to {
    opacity: 0;
    transform: translateY(8px);
  }
}

@keyframes ownedPanelIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.skip-link {
  position: absolute;
  left: -999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus,
.skip-link:active {
  left: 8px;
  top: 8px;
  width: auto;
  height: auto;
  padding: 0.6rem 0.8rem;
  background: #ff9800;
  color: #111;
  border-radius: 8px;
  z-index: 1000;
  outline: 2px solid #fff;
}

.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.drop-zone:focus-visible {
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb) / 0.55);
}

ul#fileList li.expiring .ttl-inline,
.owned-chip.expiring .ttl {
  color: var(--danger) !important;
}

/* Slider focus highlight */
input[type="range"]:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 4px;
  box-shadow: 0 0 0 4px rgba(var(--accent-rgb) / 0.25);
}

/* Container that will hold extra controls (appears on keyboard focus) */
.range-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
}

.range-extra {
  position: absolute;
  right: -8px;
  top: 50%;
  transform: translate(90%, -50%) scale(0.96);
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  opacity: 0;
  pointer-events: none;
  transition: 0.28s var(--e-out);
  background: #1f2733;
  border: 1px solid #2b3746;
  padding: 0.4rem 0.5rem 0.45rem;
  border-radius: 8px;
  box-shadow: 0 4px 18px -8px rgba(0, 0, 0, 0.6);
  min-width: 90px;
}

.range-wrapper.keyboard-focus .range-extra {
  opacity: 1;
  transform: translate(100%, -50%) scale(1);
  pointer-events: auto;
}

.range-extra button {
  background: #2c394a;
  color: #cfd6de;
  border: 1px solid #364454;
  font-size: 0.75rem;
  letter-spacing: 0.4px;
  padding: 0.3rem 0.45rem;
  border-radius: 5px;
  cursor: pointer;
}

.range-extra button:hover {
  background: #334454;
}

.range-extra button:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Hidden skip links to specific sections */
nav.vis-skip {
  position: absolute;
  left: -999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

nav.vis-skip:focus-within {
  left: 8px;
  top: 56px;
  width: auto;
  height: auto;
  background: #ff9800;
  color: #111;
  padding: 0.6rem 0.7rem;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  z-index: 1000;
}

nav.vis-skip a {
  color: #111;
  text-decoration: none;
  font-size: 0.78rem;
  font-weight: 600;
}

nav.vis-skip a:focus-visible {
  outline: 2px solid #111;
  outline-offset: 2px;
}

/* Expiring item emphasis already defined; ensure high contrast */
.owned-chip.expiring .ttl,
ul#fileList li.expiring .ttl-inline {
  color: #ff5252 !important;
  font-weight: 600;
}

/* Subtle helper class for secondary text with adequate contrast */
.subtle {
  color: var(--text-subtle);
}

/* === Accordion / FAQ Enhancements === */
.faq-intro,
.terms-intro {
  animation: fadeIn 0.6s var(--e-out);
}

.details-list details {
  position: relative;
}

.details-list details:not(:last-child) {
  margin-bottom: 0.9rem;
}

.details-list summary {
  display: flex;
  align-items: center;
  gap: 0.55rem;
}

.details-list summary .arrow {
  flex: none;
  width: 0.85rem;
  height: 0.85rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: 0.45s var(--e-out) transform, 0.35s opacity;
  font-size: 0.7rem;
  line-height: 1;
  opacity: 0.7;
}

.details-list details[open] summary .arrow {
  transform: rotate(90deg);
  opacity: 1;
}

/* Generic arrow using pseudo if .arrow span omitted */
summary:not(.no-arrow)::before {
  content: "";
  display: inline-block;
  width: 0.55rem;
  height: 0.55rem;
  margin-right: 0.55rem;
  border-right: 2px solid var(--text-subtle);
  border-bottom: 2px solid var(--text-subtle);
  transform: rotate(-45deg) translateY(-1px);
  transition: 0.45s var(--e-out) transform, 0.35s border-color;
  opacity: 0.75;
}

details[open] > summary:not(.no-arrow)::before {
  transform: rotate(45deg) translateY(-1px);
  border-color: var(--accent);
  opacity: 1;
}

/* Smooth reveal (height anim helper) */
.details-animate {
  overflow: hidden;
  transition: grid-template-rows 0.45s var(--e-out);
  display: grid;
  grid-template-rows: 0fr;
}

.details-animate > * {
  overflow: hidden;
}

details[open] .details-animate {
  grid-template-rows: 1fr;
}

/* Subtle highlight on hover */
.details-list details {
  background: #141d26;
  border: 1px solid #22303b;
  border-radius: 10px;
  padding: 0.85rem 1rem 0.95rem;
  transition: 0.35s background, 0.35s border-color, 0.35s box-shadow;
}

.details-list details:hover {
  border-color: #2e3e4d;
}

.details-list details[open] {
  border-color: #314356;
  background: #18222d;
}

/* Animated accent underline for headings */
.section-head {
  position: relative;
  display: inline-block;
}

.section-head::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -4px;
  width: 100%;
  height: 2px;
  background: linear-gradient(
    90deg,
    var(--accent),
    rgba(var(--accent-rgb) / 0)
  );
  transform: scaleX(0.4);
  transform-origin: left;
  transition: 0.6s var(--e-out);
  opacity: 0.65;
}

.section-head.animate-in::after {
  transform: scaleX(1);
  opacity: 1;
}

/* Fade / slide utilities */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.55s var(--e-out) both;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn 0.5s var(--e-out) both;
}

/* Inline badge style */
.badge {
  display: inline-block;
  font-size: 0.75rem;
  letter-spacing: 0.5px;
  padding: 0.2rem 0.45rem 0.25rem;
  border: 1px solid #2b3744;
  background: #18222d;
  border-radius: 999px;
  text-transform: uppercase;
  color: var(--text-subtle);
}

.badge.accent {
  border-color: rgba(var(--accent-rgb) / 0.5);
  background: linear-gradient(145deg, #1b1205, #281b08);
  color: var(--accent);
}

/* Quick in-page nav pills */
.inline-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 0.45rem;
  margin: 0 0 1.1rem;
  padding: 0;
  list-style: none;
}

.inline-nav a {
  text-decoration: none;
  font-size: 0.78rem;
  letter-spacing: 0.6px;
  padding: 0.35rem 0.65rem 0.4rem;
  border: 1px solid #273443;
  background: #162029;
  border-radius: 999px;
  color: var(--text-subtle);
  transition: 0.3s background, 0.3s border-color, 0.3s color;
}

.inline-nav a:hover,
.inline-nav a:focus-visible {
  background: #1e2a35;
  border-color: #314356;
  color: var(--text);
}

.inline-nav a:active {
  transform: translateY(1px);
}

/* Accessible focus for summary element */
summary:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 3px;
  border-radius: 6px;
}

/* Terms panel animation */
.panel.slide-in {
  animation: fadeInUp 0.65s var(--e-out);
}

/* Smooth accordion content transition */
.details-animate {
  position: relative;
}

.details-animate > div {
  opacity: 0;
  transform: translateY(-4px);
  transition: 0.45s var(--e-out);
}

details[open] .details-animate > div {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.05s;
}

/* Prefers-reduced-motion respect */
@media (prefers-reduced-motion: reduce) {
  .details-animate > div {
    transition: none;
    transform: none !important;
  }
}

ul#fileList li.group-batch {
  padding: 0.85rem 0.9rem 0.95rem;
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
}

ul#fileList li.group-batch .group-head {
  margin-bottom: 0.25rem;
}

ul#fileList li.group-batch .group-files {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 0.4rem;
}

ul#fileList li.group-batch .file-entry {
  padding: 0.55rem 0.65rem 0.6rem;
  border: 1px solid #2c3948;
  border-radius: 8px;
  background: #1a2430;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

ul#fileList li.group-batch .file-entry .links {
  margin-top: 0.35rem;
}

ul#fileList li.group-batch .file-entry:not(:first-child) {
  margin-top: 0.25rem;
}

ul#fileList li.group-batch .file-entry .file-row {
  margin: 0;
}

ul#fileList li.group-batch .file-entry .bar {
  margin-top: 2px;
}

@media (max-width: 640px) {
  ul#fileList li.group-batch {
    padding: 0.9rem 0.85rem 1rem;
  }

  ul#fileList li.group-batch .file-entry {
    padding: 0.65rem 0.7rem 0.7rem;
  }
}

ul#fileList li.group-batch.group-empty-start {
  position: relative;
}

ul#fileList li.group-batch.group-empty-fade {
  transition: opacity 0.4s var(--e-out);
  opacity: 0;
}

ul#fileList li.group-batch .group-empty-msg {
  font-size: 0.78rem;
  letter-spacing: 0.4px;
  opacity: 0.75;
  padding: 0.4rem 0.25rem;
  text-align: center;
}

.removal-clone {
  box-shadow: 0 4px 22px -10px rgba(0, 0, 0, 0.7);
  border-radius: 11px;
  overflow: hidden;
}

/* Accessibility contrast fixes */
.footer-links {
  opacity: 1 !important;
}

.footer-links a[href$="report"],
.footer-links a[href$="terms"],
.footer-links > a[target="_blank"][rel="noopener"] {
  color: #f5f9fc;
  /* High contrast against dark bg */
  text-decoration: none;
  font-weight: 500;
  letter-spacing: 0.4px;
}

.footer-links a[href$="report"]:hover,
.footer-links a[href$="terms"]:hover,
.footer-links > a[target="_blank"][rel="noopener"]:hover,
.footer-links a[href$="report"]:focus-visible,
.footer-links a[href$="terms"]:focus-visible,
.footer-links > a[target="_blank"][rel="noopener"]:focus-visible {
  color: var(--accent);
  text-decoration: underline;
}

#ipNote {
  opacity: 1 !important;
  color: #9fb3c6 !important;
  font-size: 0.78rem !important;
}

.footer-links {
  font-size: 0.78rem !important;
}

/* Center the brand and ensure the logo is vertically middle-aligned */
.brand-heading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  margin: 0;
}

.brand-link {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  line-height: 1;
  text-decoration: none;
  color: inherit;
}

.brand-link {
  position: relative;
}

/* Adjust heading font metrics to center with icon */
.brand-heading .brand-link {
  padding: 0.25rem 0.9rem 0.3rem;
}

.brand-heading .logo {
  margin: 0 12px 0 0;
}

.logo {
  /* larger, explicitly sized icon and force pixelated rendering (no antialias)
     kept object-fit to preserve aspect ratio inside the size box */

  width: 64px;
  height: 64px;
  display: block;
  object-fit: contain;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  /* ensure the browser does not smooth the image */
  -webkit-font-smoothing: none;
  image-rendering: -webkit-optimize-contrast;
}

/* Accessibility: maintain focus outline within new border */
.brand-link:focus-visible {
  outline-offset: 2px;
}

@media (max-width: 640px) {
  .brand-heading .brand-link {
    padding: 0.2rem 0.7rem 0.25rem;
  }

  .brand-heading .logo {
    margin: 0 8px 0 0;
  }
}

/* Styles used by public/simple.html */
.page-title {
  /* keep same look as main h1 but scoped */
  margin: 0 0 0.45rem;
  font-size: clamp(1.6rem, 6vw, 2.4rem);
  color: var(--text);
  letter-spacing: 0.5px;
  font-weight: 600;
  text-align: center;
  padding-top: 1.2rem;
}

p.lead {
  /* already exists earlier but ensure spacing for simple page */
  margin: 0 0 1.1rem;
  font-size: 0.9rem;
  color: var(--text-subtle);
  text-align: center;
}

.upload {
  width: min(680px, 88%);
  margin: 0 auto 1rem;
}

.upload fieldset {
  border: 2px solid #ff9800;
  background: #232c3a;
  padding: 1rem;
  border-radius: 12px;
}

.upload label {
  display: block;
  margin-bottom: 0.45rem;
  color: var(--text-subtle);
  font-weight: 600;
}

.upload input[type="file"] {
  display: block;
  width: 100%;
  padding: 0.45rem 0.5rem;
  background: #0f1820;
  border: 1px dashed rgba(255, 152, 0, 0.07);
  color: var(--text);
  border-radius: 8px;
}

.ttl-box {
  display: flex;
  gap: 0.6rem;
  align-items: center;
  margin-top: 0.6rem;
}

.ttl-box .ttl-label {
  margin: 0;
  color: var(--text-subtle);
}

select#ttl {
  background: #0f1820;
  color: var(--text);
  border: 1px solid #2b394a;
  padding: 0.35rem 0.5rem;
  border-radius: 6px;
}

.note-extra {
  font-size: 0.78rem;
  opacity: 1;
  color: #ffd580;
  font-weight: 600;
}

button.primary {
  display: inline-block;
  margin-top: 0.8rem;
  background: linear-gradient(
    180deg,
    var(--accent),
    color-mix(in srgb, var(--accent) 75%, black)
  );
  color: #071018;
  border: none;
  padding: 0.6rem 0.9rem;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
}

button.primary:hover {
  transform: translateY(-2px);
}

button.primary:active {
  transform: scale(0.99);
}

.files-panel {
  width: min(820px, 88%);
  margin: 1rem auto;
  padding: 1rem;
  border-radius: 12px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
}

.files-heading {
  margin: 0.1rem 0 0.6rem;
  font-size: 0.95rem;
  letter-spacing: 0.5px;
  opacity: 0.9;
  text-transform: uppercase;
  color: var(--text-subtle);
}

.files-table {
  width: 100%;
  border-collapse: collapse;
}

.files-table th,
.files-table td {
  text-align: left;
  padding: 0.55rem 0.6rem;
  border-bottom: 1px solid #23313b;
  font-size: 0.9rem;
}

.files-table th {
  font-weight: 700;
  color: #fff;
  background: #181f2b;
}

.note {
  font-size: 0.85rem;
  color: var(--text-subtle);
  margin-top: 0.6rem;
}

/* Language selector form accessibility and contrast improvements */
.lang-form {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.7em;
  margin: 1.7rem auto 1.2rem auto;
  padding: 0.7em 1.2em;
  background: #181f2b;
  border: 1px solid #232c3a;
  border-radius: 13px;
  box-shadow: 0 2px 10px #0002;
  max-width: 340px;
}
.lang-label {
  font-size: 0.98em;
  opacity: 0.92;
  display: flex;
  align-items: center;
  gap: 0.5em;
  cursor: pointer;
  margin: 0;
}
.lang-icon {
  font-size: 1.25em;
  filter: drop-shadow(0 1px 2px #0f141b33);
}
#langSelectSimple {
  font-size: 1em;
  padding: 0.45em 1.3em 0.45em 0.8em;
  border-radius: 10px;
  margin-left: 0.1em;
  background: #232c3a;
  color: #fff;
  border: 2px solid #ff9800;
  box-shadow: 0 1px 4px #0002;
  appearance: none;
  cursor: pointer;
  transition: border 0.2s;
  min-width: 120px;
  min-height: 44px;
}
.lang-btn {
  font-size: 1em;
  padding: 0.45em 1.2em;
  border-radius: 10px;
  background: #ff9800;
  color: #111;
  border: none;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 1px 4px #0001;
  transition: background 0.2s;
  min-width: 44px;
  min-height: 44px;
  margin-left: 0.7em;
}
.lang-btn:focus-visible,
#langSelectSimple:focus-visible {
  outline: 2px solid #fff;
  outline-offset: 2px;
  border-color: #fff;
}

/* Make small screens comfortable */
@media (max-width: 480px) {
  .upload,
  .files-panel {
    width: 94%;
  }

  .page-title {
    font-size: 1.5rem;
  }
}

#langForm select:focus {
  outline: 2px solid #6cf;
  border-color: #6cf;
}
/* Fix unreadable option text in Chromium browsers */
#langForm select,
#langForm option {
  color: #fff;
  background: #181f2b;
}
/* Forcing color in Chromium for options */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  #langForm option {
    color: #fff;
    background: #181f2b;
  }
}
@media (max-width: 600px) {
  #langForm {
    margin: 1rem 0 0 0;
  }
}

.ttl-row {
  display: flex;
  align-items: center;
  gap: 0.5em;
  position: relative;
}
.ttl-bar-wrap {
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 4px;
  background: #332822;
  border-radius: 2px;
  overflow: hidden;
  width: 80px;
  z-index: 2;
}
.ttl-bar {
  display: block;
  height: 100%;
  background: #ff9800;
  border-radius: 2px;
  transition: width 0.5s cubic-bezier(0.4, 2, 0.6, 1);
  min-width: 0;
}
.ttl-row .ttl {
  z-index: 1;
}
